CREATE TABLE device (id INT AUTO_INCREMENT NOT NULL, region_id INT DEFAULT NULL, token VARCHAR(64) NOT NULL, options VARCHAR(255) NOT NULL, date_registration DATETIME DEFAULT NULL, last_attempt DATETIME DEFAULT NULL, last_state VARCHAR(64) DEFAULT NULL, sync_timestamp INT DEFAULT NULL, sync_period INT DEFAULT NULL, active TINYINT(1) DEFAULT '1' NOT NULL, INDEX IDX_92FB68E98260155 (region_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE dtd (id INT AUTO_INCREMENT NOT NULL, xml_id VARCHAR(255) NOT NULL, title VARCHAR(64) NOT NULL, sync_period VARCHAR(64) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE event (id INT AUTO_INCREMENT NOT NULL, xml_id VARCHAR(64) NOT NULL, title VARCHAR(512) NOT NULL, eventDate DATETIME DEFAULT NULL, text LONGTEXT DEFAULT NULL, sharing_url VARCHAR(1024) DEFAULT NULL, sharing_short_url VARCHAR(1024) DEFAULT NULL, image_url VARCHAR(1024) DEFAULT NULL, thumbnail_url VARCHAR(1024) DEFAULT NULL, categories VARCHAR(1024) DEFAULT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE feed (id INT AUTO_INCREMENT NOT NULL, dtd_id INT DEFAULT NULL, region_id INT DEFAULT NULL, url VARCHAR(255) NOT NULL, filename VARCHAR(255) NOT NULL, email VARCHAR(64) NOT NULL, last_attempt DATETIME DEFAULT NULL, last_state VARCHAR(64) DEFAULT NULL, sync_timestamp INT DEFAULT NULL, active INT DEFAULT 1 NOT NULL, INDEX IDX_234044AB3B1D696 (dtd_id), INDEX IDX_234044AB98260155 (region_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE house (id INT AUTO_INCREMENT NOT NULL, region_id INT DEFAULT NULL, xml_id VARCHAR(64) NOT NULL, title VARCHAR(512) NOT NULL, lat DOUBLE PRECISION DEFAULT NULL, lon DOUBLE PRECISION DEFAULT NULL, zone VARCHAR(128) DEFAULT NULL, infos LONGTEXT DEFAULT NULL, services VARCHAR(64) DEFAULT NULL, contact VARCHAR(1024) DEFAULT NULL, image_url VARCHAR(1024) DEFAULT NULL, thumbnail_url VARCHAR(1024) DEFAULT NULL, sharing_url VARCHAR(1024) DEFAULT NULL, sharing_short_url VARCHAR(1024) DEFAULT NULL, INDEX IDX_67D5399D98260155 (region_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE online_service (id INT AUTO_INCREMENT NOT NULL, region_id INT DEFAULT NULL, xml_id VARCHAR(64) NOT NULL, title VARCHAR(512) NOT NULL, short_desc VARCHAR(1024) DEFAULT NULL, image_url VARCHAR(1024) DEFAULT NULL, thumbnail_url VARCHAR(1024) DEFAULT NULL, link VARCHAR(1024) DEFAULT NULL, INDEX IDX_D00B492C98260155 (region_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE regions (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(128) NOT NULL, code INT NOT NULL, type VARCHAR(64) NOT NULL, active TINYINT(1) DEFAULT '1' NOT NULL, UNIQUE INDEX UNIQ_A26779F377153098 (code), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE role (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(128) NOT NULL, role VARCHAR(64) NOT NULL, type INT NOT NULL, active INT DEFAULT 1 NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE service (id INT AUTO_INCREMENT NOT NULL, region_id INT DEFAULT NULL, xml_id VARCHAR(64) NOT NULL, title VARCHAR(512) NOT NULL, lat DOUBLE PRECISION DEFAULT NULL, lon DOUBLE PRECISION DEFAULT NULL, zone VARCHAR(128) DEFAULT NULL, content LONGTEXT DEFAULT NULL, image_url VARCHAR(1024) DEFAULT NULL, thumbnail_url VARCHAR(1024) DEFAULT NULL, INDEX IDX_E19D9AD298260155 (region_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE splash (id INT AUTO_INCREMENT NOT NULL, region_id INT DEFAULT NULL, type LONGTEXT NOT NULL, INDEX IDX_BA3814F098260155 (region_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user (id INT AUTO_INCREMENT NOT NULL, role_id INT DEFAULT NULL, region_id INT NOT NULL, username VARCHAR(64) NOT NULL, firstname VARCHAR(64) NOT NULL, lastname VARCHAR(64) NOT NULL, password VARCHAR(64) NOT NULL, email VARCHAR(64) NOT NULL, active INT NOT NULL, INDEX IDX_8D93D649D60322AC (role_id), INDEX IDX_8D93D64998260155 (region_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE device ADD CONSTRAINT FK_92FB68E98260155 FOREIGN KEY (region_id) REFERENCES regions (id);
ALTER TABLE feed ADD CONSTRAINT FK_234044AB3B1D696 FOREIGN KEY (dtd_id) REFERENCES dtd (id);
ALTER TABLE feed ADD CONSTRAINT FK_234044AB98260155 FOREIGN KEY (region_id) REFERENCES regions (id);
ALTER TABLE house ADD CONSTRAINT FK_67D5399D98260155 FOREIGN KEY (region_id) REFERENCES regions (id);
ALTER TABLE online_service ADD CONSTRAINT FK_D00B492C98260155 FOREIGN KEY (region_id) REFERENCES regions (id);
ALTER TABLE service ADD CONSTRAINT FK_E19D9AD298260155 FOREIGN KEY (region_id) REFERENCES regions (id);
ALTER TABLE splash ADD CONSTRAINT FK_BA3814F098260155 FOREIGN KEY (region_id) REFERENCES regions (id);
ALTER TABLE user ADD CONSTRAINT FK_8D93D649D60322AC FOREIGN KEY (role_id) REFERENCES role (id);
ALTER TABLE user ADD CONSTRAINT FK_8D93D64998260155 FOREIGN KEY (region_id) REFERENCES regions (id);

